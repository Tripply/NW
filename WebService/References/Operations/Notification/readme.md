
---

# TsReturnOperation PHP Class

Этот PHP класс реализует операцию обработки уведомлений о возврате товаров для веб-сервиса. Он использует различные зависимости, такие как модели `Contractor`, `Employee`, `Seller`, классы `MessagesClient` и `NotificationManager`, а также константы и события для отправки уведомлений по электронной почте и SMS.

## Функциональность

Класс `TsReturnOperation` выполняет следующие задачи:

- Получение данных из запроса и проверка наличия обязательных полей.
- Проверка существования продавца (`Seller`) и клиента (`Contractor`), а также согласование их связей.
- Формирование данных для шаблонов сообщений на основе различий в статусе возврата товаров.
- Отправка уведомлений сотрудникам (по электронной почте) и клиентам (по электронной почте и SMS) при смене статуса возврата товаров.

## Зависимости

- `Contractor`: Модель, представляющая клиента или продавца.
- `Employee`: Модель, представляющая сотрудника.
- `Seller`: Модель, расширяющая `Contractor`, представляющая продавца.
- `Status`: Класс для работы со статусами.
- `MessagesClient`: Класс для отправки сообщений.
- `NotificationManager`: Класс для управления уведомлениями.

## Использование

Для использования `TsReturnOperation` необходимо:

1. **Подключить классы и зависимости**: Убедитесь, что все необходимые классы и функции доступны в вашем проекте.

2. **Использовать метод `doOperation()`**: Вызовите метод `doOperation()` объекта `TsReturnOperation`, передав необходимые данные через запрос или как аргументы.

```php
$operation = new TsReturnOperation();
// Предполагается, что данные передаются в $_REQUEST['data']
$result = $operation->doOperation();
```

## Условия и исключения

- В случае ошибок или отсутствия обязательных данных, метод `doOperation()` выбрасывает исключения с соответствующими сообщениями и кодами ошибок.
- Проверяется наличие данных для отправки сообщений и их корректность перед отправкой.

## Примечания

Этот код представляет собой пример реализации операции в веб-сервисе и может быть адаптирован или расширен в зависимости от требований конкретного проекта.

---
